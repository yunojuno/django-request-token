# Changelog

All notable changes to this project will be documented in this file.

## [3.0.0] - 2026-02-16

### Breaking Changes

-   The `required` parameter on `@use_request_token` is now mandatory.
    Previously it defaulted to `False`, which meant decorating a view
    with `@use_request_token(scope="foo")` provided no access control
    at all — requests without a token were silently passed through.

    This was a security footgun: developers reasonably expected that
    adding the decorator would enforce token presence, but it didn't.

    We chose to make `required` mandatory rather than simply flipping the
    default to `True` because a silent default change could break existing
    views that intentionally allow token-less requests. Making it mandatory
    forces every call site to be reviewed and explicitly opt in or out.

    You must now explicitly pass `required=True` or `required=False`
    on every call site. Omitting it raises `TypeError` at import/startup
    time, so any missing argument will be caught in local dev or CI
    before reaching production.

### Migration

Replace all bare usages:

```python
# Before
@use_request_token(scope="foo")

# After — choose one:
@use_request_token(scope="foo", required=True)   # token must be present
@use_request_token(scope="foo", required=False)  # token optional (old default)
```

## [2.4.0] - 2025-06-18

-   Add Django 5.1 and 5.2 support
-   Add Python 3.13 support
-   Drop support for Django < 4.2 (Django 3.2, 4.0, 4.1)
-   Updated minimum Python version requirement to 3.10
-   Updated ruff configuration to use modern syntax
-   Update GitHub workflows to test Django main branch only with Python 3.12+

## [2.3.1] - 2024-10-23

-   Catch UnicodeDecodeError in middleware [fixes #61]

## [2.3] - 2023-11-14

-   Add Django 5.0 to build matrix
-   Add Python 3.12 to build matrix

No code changes.

## [2.2] - 2023-11-14

-   Add support for searching in admin by JWT [fixes #59]
-   Add support for disabling logging on a per-view basis [fixes #55]

## [2.1] - 2022-11-09

-   Add Python 3.11 support

## [1.0] - 2022-02-07

-   Add Django 4.0 and Python 3.10 support
-   Add `RequestToken.tokenise` method

## [0.15] - 2021-06-24

-   Add support for non-default user PK fields (e.g. uuid) - thanks @timomeara
-   Add `increment_used_count` method.

## [0.14] - 2021-04-14

### Removed

-   Logging of token use errors - this has never worked
-   Custom 403_TEMPLATE use (and setting)

## [0.12] - 2020-08-17

No functional changes - just updating classifiers and CI support.

### Added

-   Add Django 3.1 support
-   Add Django master to CI build matrix

## [0.10] - 2020-01-26

### Added

-   Add `isort` and `black` formatting
-   Add `pylint` and `flake8` linting
-   Add type hints and `mypy` checks
-   Add pre-commit config

### Changed

-   Replace pipenv with poetry

### Deprecated

-   Django 1.11, 2.0, 2.1
-   Python 3.6
